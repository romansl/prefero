buildscript {
    ext.kotlin_version = '1.1.2-3'
    repositories {
        jcenter()
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

apply plugin: 'java'
apply plugin: 'kotlin'

repositories {
    jcenter()
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
    //compile 'com.squareup:kotlinpoet:0.2.0'
    compile project(':annotations')
    compile project(':kotlinpoet')
}

task fatJar(type: Jar) {
    group 'build'
    baseName = project.name + '-all'
    from {
        configurations.compile.filter {
            it.toString().contains("kotlinpoet.jar")
        }.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
    with jar
}

sourceCompatibility = "1.6"
targetCompatibility = "1.6"
